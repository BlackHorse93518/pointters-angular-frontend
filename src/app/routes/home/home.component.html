<div id="index_main" class="col-xs-12 col-md-12 padding-0" style="background-color:rgb(249,249,249)"
     [ngClass]="{'padding-bottom-60': activeTab !== 2}"
>
  <div id="index_sidepanel"
       class="margin-left-50 hidden-xs hidden-sm  col-md-3 col-xs-12 col-sm-offset-1 margin-top-30">

    <!-- Upcoming service -->
    <div *ngIf="upcoming" class="col-xs-12 col-md-12 padding-0 margin-bottom-20">
      <h4 class="color-text-black font-weight-600 padding-bottom-15">Upcoming Services</h4>
      <div class="col-xs-11 col-md-12 padding-left-20 padding-right-0 color-bg-white div-white-box-shadow">
        <div *ngFor="let service of upcoming" class="col-xs-12 col-md-12 padding-0 padding-top-20 padding-bottom-20"
             style="position:relative; border-bottom: 1px solid #e9e9e9;">
          <div class="col-md-10 col-xs-12 padding-0">
            <p class="font-em-11 margin-bottom-3 color-text-black text-capitalize text-bold">{{service.description |
              truncateToWord:20}}</p>
            <p class="font-em-09 margin-bottom-5 color-blue text-bold">{{service.time}}</p>
            <p class="font-em-09 margin-bottom-0 color-mediumgray" *ngIf="service.location && service.location[0]">
              <span class="fa fa-map-marker padding-right-3"></span>{{service.location[0].city}} ,
              {{service.location[0].country}}, {{ user && ( turf(service.location[0].geoJson,
              user.location.geoJson) | truncateNumber) }} km
            </p>
          </div>
          <i class="fa fa-angle-right fa-2x color-mediumgray" style="position:absolute; right:25px; top:25%;"></i>
        </div>

        <a [routerLink]="['/buy/orders']" class="col-xs-12 col-md-12 padding-0 padding-top-6 padding-bottom-6">
          <p class="margin-bottom-2">View more</p>
        </a>
      </div>
    </div>

    <div *ngIf="!upcoming" class="col-xs-12 col-md-12 padding-0 margin-bottom-20">
      <h4 class="color-text-black font-weight-600 padding-bottom-15">Upcoming Services</h4>
      <div class="col-xs-11 col-md-12 padding-left-20 padding-right-0 color-bg-white div-white-box-shadow">
        <content-loader [speed]="2" [height]="300">


          <svg:rect x="20" y="30" rx="0" ry="0" width="60%" height="15"/>
          <svg:rect x="20" y="55" rx="0" ry="0" width="50%" height="10"/>
          <svg:rect x="20" y="75" rx="0" ry="0" width="55%" height="10"/>

          <svg:rect x="20" y="105" rx="0" ry="0" width="80%" height="2"/>

          <svg:rect x="20" y="122" rx="0" ry="0" width="60%" height="15"/>
          <svg:rect x="20" y="147" rx="0" ry="0" width="50%" height="10"/>
          <svg:rect x="20" y="167" rx="0" ry="0" width="55%" height="10"/>

          <svg:rect x="20" y="192" rx="0" ry="0" width="80%" height="2"/>

          <svg:rect x="20" y="209" rx="0" ry="0" width="60%" height="15"/>
          <svg:rect x="20" y="234" rx="0" ry="0" width="50%" height="10"/>
          <svg:rect x="20" y="254" rx="0" ry="0" width="55%" height="10"/>

        </content-loader>

      </div>
    </div>

    <!-- My Dashboard -->
    <div class="col-xs-12 col-md-12 padding-10" *ngIf="activeTab !== 1">
      <h4 class="color-text-black font-weight-600 padding-bottom-15">My Dashboard</h4>
      <div *ngIf="dashboard"
           class="col-xs-11 col-md-12 padding-left-20 padding-right-0 color-bg-white div-white-box-shadow padding-top-25 padding-bottom-25">
        <div class="col-xs-12 col-md-12 padding-0">
          <div class="col-md-2 col-xs-3 padding-0">
            <p class="dashboard_sub_left">{{ dashboard.numOrdersThisWeek }}</p>
          </div>
          <div class="col-md-10 col-xs-9">
            <p class="margin-top-2 text-bold">Orders this week</p>
          </div>
        </div>
        <div class="col-xs-12 col-md-12 padding-0">
          <div class="col-md-2 col-xs-3 padding-0">
            <p class="dashboard_sub_left ">{{ dashboard.numOffersSentThisWeek }}</p>
          </div>
          <div class="col-md-10 col-xs-9">
            <p class="margin-top-2 text-bold">Offers Sent this week</p>
          </div>
        </div>
        <div class="col-xs-12 col-md-12 padding-0">
          <div class="col-md-2 col-xs-3 padding-0">
            <p class="dashboard_sub_left">{{ dashboard.numJobs }}</p>
          </div>
          <div class="col-md-10 col-xs-9">
            <p class="margin-top-2 text-bold">Jobs Suggested</p>
          </div>
        </div>
        <div class="col-xs-12 col-md-12 padding-0">
          <div class="col-md-2 col-xs-3 padding-0">
            <p class="dashboard_sub_left">{{ dashboard.currencySymbol }}{{ dashboard.salesThisMonth }}</p>
          </div>
          <div class="col-md-10 col-xs-9">
            <p class="margin-top-2 text-bold">Sales this month</p>
          </div>
        </div>
      </div>

      <div *ngIf="!upcoming"
           class="col-xs-11 col-md-12 padding-left-20 padding-right-0 color-bg-white div-white-box-shadow padding-top-25 padding-bottom-25">
        <content-loader [speed]="2" [height]="260">


          <svg:rect x="20" y="30" rx="0" ry="0" width="60%" height="15"/>
          <svg:rect x="20" y="55" rx="0" ry="0" width="50%" height="10"/>
          <svg:rect x="20" y="75" rx="0" ry="0" width="55%" height="10"/>

          <svg:rect x="20" y="105" rx="0" ry="0" width="80%" height="2"/>

          <svg:rect x="20" y="122" rx="0" ry="0" width="60%" height="15"/>
          <svg:rect x="20" y="147" rx="0" ry="0" width="50%" height="10"/>
          <svg:rect x="20" y="167" rx="0" ry="0" width="55%" height="10"/>

          <svg:rect x="20" y="192" rx="0" ry="0" width="80%" height="2"/>

          <svg:rect x="20" y="209" rx="0" ry="0" width="60%" height="15"/>
          <svg:rect x="20" y="234" rx="0" ry="0" width="50%" height="10"/>
          <svg:rect x="20" y="254" rx="0" ry="0" width="55%" height="10"/>

        </content-loader>
      </div>
    </div>


    <!-- Recent Searches -->
    <div class="col-xs-12 col-md-12 padding-0" *ngIf="activeTab === 1">
      <h4 class="color-text-black font-weight-600 padding-bottom-15">Recent Searches</h4>
      <div class="col-xs-11 col-md-12 padding-right-30 color-bg-white div-white-box-shadow padding-bottom-0">
        <div class="col-xs-12 col-md-12 height-44-px aligner" *ngFor="let item of recentSearches; let i = index;">

          <!-- <div class="col-xs-1 padding-0">
            <input type="radio" name="search" id="{{'search' + i}}" />
            <label for="{{'search' + i}}">
              <span></span>
            </label>
          </div> -->
          <img src="assets/images/time.png" width="18" height="18" alt=" " onerror="this.src='/assets/images/no-img.jpeg';" style="margin-right: 10px;">

          <span class="display-inlineBlock color-gray">Test search result</span>
          <div class="recent-separator"></div>


        </div>
        <div class="col-xs-12 col-md-12 padding-top-10 height-44-px aligner">
          <p class="font-px-12 clickable">View more</p>
        </div>
      </div>
    </div>

    <!-- Recent Categories -->
    <div class="col-xs-12 col-md-12 padding-0 padding-top-40" *ngIf="activeTab === 1">
      <h4 class="color-text-black font-weight-600 padding-bottom-15">Recent Categories</h4>
      <div class="col-xs-11 col-md-12 padding-right-30 color-bg-white div-white-box-shadow padding-bottom-0">
        <div class="col-xs-12 col-md-12 height-44-px aligner" *ngFor="let item of recentCategories; let i = index;">

          <img src="assets/images/time.png" width="18" height="18" alt=" " onerror="this.src='/assets/images/no-img.jpeg';" style="margin-right: 10px;">

          <span class="display-inlineBlock color-gray">Test category</span>
          <div class="recent-separator"></div>


        </div>
        <div class="col-xs-12 col-md-12 padding-top-10 height-44-px aligner">
          <p class="font-px-12 clickable">View more</p>
        </div>
      </div>
    </div>

  </div>

  <div id="index_contentarea" class="col-md-8 col-sm-12 col-xs-12 margin-top-30">

    <ul id="submenu-ul" class="margin-bottom-15 padding-0 padding-left-15">
      <li class="btn_submenu_li" style="margin-left:0px !important;">
        <a routerLink="/home" routerLinkActive="active" class="btn_submenu"
           [ngClass]="{'btn_submenu_clicked': activeTab === 0}">Services</a>
      </li>
      <li class="btn_submenu_li">
        <a routerLink="/explore/live-offers" routerLinkActive="active" class="btn_submenu"
           [ngClass]="{'btn_submenu_clicked': activeTab === 1}">Live offers</a>
      </li>
      <li class="btn_submenu_li">
        <a routerLink="/explore/jobs" routerLinkActive="active" class="btn_submenu"
           [ngClass]="{'btn_submenu_clicked': activeTab === 2}">Jobs</a>
      </li>
    </ul>

    <div class="services col-xs-12 col-md-12 padding-0 " id="content_area ">
      <div id="services-container" style="display: flex; flex-wrap: wrap;" *ngIf="activeTab === 0">


        <ng-container *ngIf="models.length <= 0">
          <div *ngFor="let i of content_length" style="flex-grow: 1;min-width: 200px; max-width: 250px;"
               class="margin-bottom-40 margin-right-10 margin-left-10">
            <div class="col-md-12 col-xs-12 padding-0 sub_div div-white-box-shadow-7 div-white-box-shadow "
                 style="height: 356px; max-width:250.5px;">

              <content-loader [speed]="2" [height]="365" [width]="250">
                <svg:rect x="0" y="0" rx="2" ry="2" width="250" height="167"/>

                <svg:rect x="20" y="185" rx="0" ry="0" width="190" height="15"/>
                <svg:rect x="20" y="210" rx="0" ry="0" width="150" height="15"/>

                <svg:rect x="20" y="235" rx="0" ry="0" width="140" height="10"/>
                <svg:rect x="20" y="252" rx="0" ry="0" width="170" height="10"/>

                <svg:circle cx="40" cy="290" r="10"/>
                <svg:circle cx="120" cy="290" r="10"/>
                <svg:circle cx="200" cy="290" r="10"/>

                <svg:rect x="0" y="310" rx="0" ry="0" width="250" height="1"/>

                <svg:rect x="20" y="327" rx="0" ry="0" width="100" height="15"/>
                <svg:rect x="190" y="327" rx="0" ry="0" width="40" height="15"/>

              </content-loader>

            </div>
          </div>
        </ng-container>

        <div *ngFor="let model of models" style="flex-grow: 1;min-width: 200px; max-width: 250px;"
             class="margin-bottom-40 margin-right-10 margin-left-10">
          <div class="col-md-12 col-xs-12 padding-0 sub_div div-white-box-shadow-7 div-white-box-shadow "
               style="max-width:250.5px;">

            <a [routerLink]="['/service/detail/'+ model.id]" routerLinkActive="active">
              <div class="col-md-12 col-xs-12 sub_div_image"
                   [ngStyle]="{'background': '#fff url(' + model.media.fileName + ') no-repeat 0 0', 'background-size' : '100% 100%'}"></div>
            </a>

            <div class="col-md-12 col-xs-12 " *ngIf="model.location">
              <h4>{{model.description.length > 25 ? model.description.substr(0, 25) + '...' : model.description}}</h4>
              <!--<h4 class="text-bold">{{model.description | truncateToWord:40}}</h4>-->
              <!--<h4 class="text-bold">{{model.description}}</h4>-->
              <p class="font-em-09 margin-bottom-5 font-weight-500" *ngIf="model.prices">
                ${{model.prices.price}}
                <span *ngIf="model.priceWithoutDiscount" class="color-blue" style="text-decoration: line-through;">${{ model.priceWithoutDiscount }}</span>
                for {{model.prices.time}} per {{model.prices.timeUnitOfMeasure}}
              </p>

              <p *ngIf="(model.location && model.location[0] && model.location[0].geoJson && model.location[0].geoJson.coordinates) && (model.fulfillmentMethod.local || model.fulfillmentMethod.store || model.fulfillmentMethod.shipment)"
                class="font-em-09 color-mediumgray">
                <span class="fa fa-map-marker"></span>
                <span *ngIf="model.location[0].city">{{model.location[0].city}},</span>
                <span *ngIf="model.location[0].province">{{model.location[0].province}},</span>
                <!--<span *ngIf="model.location[0].state">{{model.location[0].state}},</span>-->
                <span *ngIf="model.location[0].country">{{model.location[0].country}},</span>
                {{ user && ( getUserDistance(model, user) | truncateNumber ) }} km
              </p>

              <p
                *ngIf="!(model.fulfillmentMethod.local || model.fulfillmentMethod.store || model.fulfillmentMethod.shipment)"
                class="font-em-09 color-mediumgray">
                Online
              </p>

            </div>
            <div class="col-xs-12 col-md-12 sub_div_description">
              <div class="col-md-4 col-xs-4 padding-0 text-left">
                <img src="assets/images/p.png" alt=" " onerror="this.src='/assets/images/no-img.jpeg';">
                <p class="color-mediumgray" style="font-size:12px;">{{model.pointValue}}</p>
              </div>
              <div class="col-md-4 col-xs-4 padding-0 text-center">
                <img src="assets/images/icons/brief2.png" style="vertical-align:text-bottom;" alt=" " onerror="this.src='/assets/images/no-img.jpeg';">
                <p class="color-mediumgray" style="font-size:12px;">{{model.numOrders}}%</p>
              </div>
              <div class="col-md-4 col-xs-4 padding-0 text-right">
                <i class="fa fa-star color-mediumgray"></i>
                <p class="color-mediumgray" style="font-size:12px;">{{model.avgRating}}%</p>
              </div>
            </div>
            <div id="service_detail_link" class="cursor-pointer col-xs-12 col-md-12 padding-top-6 sub_div_footer"
                 style="border-top:1px solid #e9e9e9;padding: 10px">
              <img [src]="model.seller.profilePic" alt=" " onerror="this.src='/assets/images/no-img.jpeg';"
                   style="border-radius:50%; width:24px; height:24px; margin-right:2px;">
              <p [routerLink]="['/profile', model.seller.id]" class="color-mediumgray font-em-09">
                {{model.seller.firstName + ' ' + model.seller.lastName}}</p>
              <p *ngIf="model.promoted" class="p2 color-blue font-weight-600 pull-right margin-top-4"
                 style="font-size:12px;">Promoted</p>
            </div>
          </div>
        </div>


      </div>

      <app-explore-live-offers [requestId]="liveRequestId" *ngIf="activeTab === 1"></app-explore-live-offers>
      <app-explore-jobs *ngIf="activeTab === 2"></app-explore-jobs>

    </div>

    <!--<sk-three-bounce *ngIf="fetching && activeTab === 0"></sk-three-bounce>-->
    <!--<div *ngIf="page < maxPage" #scroll class="col-md-12 col-sm-12 sub_div col-xs-12 div-white-box-shadow margin-bottom-30 padding-0"-->
    <!--style="border:none !important;"></div>-->

  </div>
</div>
